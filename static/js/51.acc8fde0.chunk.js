(()=>{"use strict";var e={51:(e,t,a)=>{var i=a(719);class r{constructor(e){this.charMap=new Map,this.kerningsMap=new Map,e.chars.forEach((e=>{this.charMap.set(e.char,e)})),e.kernings.forEach((e=>{this.kerningsMap.set(`${e.first},${e.second}`,e.amount)}))}textToGeometry(e){return e.split("").map((e=>{var t;return null!==(t=this.charMap.get(e))&&void 0!==t?t:this.charMap.get("?")})).reduce(((e,t,a,i)=>{let r=0;if(0!==a){var s;const e=i[a-1];r=null!==(s=this.kerningsMap.get(`${e.id},${t.id}`))&&void 0!==s?s:0}return e.chars.push({iXY:[e.width+t.xoffset+r,t.yoffset],iUV:[t.x,t.y],iSize:[t.width,t.height]}),e.width+=t.xadvance+r,e}),{width:0,chars:[]})}}function s(e,t){const a=Math.cos(e)*Math.cos(t);return[-Math.cos(e)*Math.sin(t),Math.sin(e),a]}function n(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];postMessage(e,...a)}let o=[];const c=new Map;self.onmessage=e=>{if("init"===e.data.type){c.clear();const t=new r(e.data.msdfDefinition);o=e.data["3LEs"].map((e=>{const a=i.YX(e[1],e[2]);return c.set(a.satnum,t.textToGeometry(e[0].slice(2))),a})).filter((e=>0===e.error)),n({type:"init",message:"ok",queryId:e.data.queryId})}else if("process"===e.data.type){const{date:t,location:a,queryId:r}=e.data,l=i.Ut(t),f={longitude:i.Ht(a.longitude),latitude:i.Ht(a.latitude),height:a.altitude/1e3},p=o.map((e=>{const a=i.a0(e,t);if("object"!==typeof a.position)return{cartesian:null,norad:e.satnum};const r=i.nB(a.position,l),n=i.us(f,r);return{norad:e.satnum,cartesian:s(n.elevation,n.azimuth)}})),h=p.filter((e=>e.cartesian)).filter((e=>e.cartesian[1]>0)),u=new Float32Array(h.flatMap((e=>e.cartesian))),d=new Float32Array(h.flatMap((e=>c.get(e.norad).chars.flatMap((()=>Array.from({length:6},(()=>e.cartesian)).flat()))))),v=new Float32Array(h.flatMap((e=>c.get(e.norad).chars.flatMap((e=>[e.iXY[0],e.iXY[1],e.iXY[0]+e.iSize[0],e.iXY[1],e.iXY[0]+e.iSize[0],e.iXY[1]+e.iSize[1],e.iXY[0],e.iXY[1],e.iXY[0],e.iXY[1]+e.iSize[1],e.iXY[0]+e.iSize[0],e.iXY[1]+e.iSize[1]]))))),g=new Float32Array(h.flatMap((e=>c.get(e.norad).chars.flatMap((e=>[e.iUV[0],e.iUV[1],e.iUV[0]+e.iSize[0],e.iUV[1],e.iUV[0]+e.iSize[0],e.iUV[1]+e.iSize[1],e.iUV[0],e.iUV[1],e.iUV[0],e.iUV[1]+e.iSize[1],e.iUV[0]+e.iSize[0],e.iUV[1]+e.iSize[1]])))));n({type:"process",result:{failedNorads:p.filter((e=>!e.cartesian)).map((e=>e.norad)),propagatedPositions:u,textsOrigins:d,textsPositions:v,textsUVCoords:g},queryId:r},[u.buffer,d.buffer,v.buffer,g.buffer])}}}},t={};function a(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,a),s.exports}a.m=e,a.x=()=>{var e=a.O(void 0,[719],(()=>a(51)));return e=a.O(e)},(()=>{var e=[];a.O=(t,i,r,s)=>{if(!i){var n=1/0;for(f=0;f<e.length;f++){for(var[i,r,s]=e[f],o=!0,c=0;c<i.length;c++)(!1&s||n>=s)&&Object.keys(a.O).every((e=>a.O[e](i[c])))?i.splice(c--,1):(o=!1,s<n&&(n=s));if(o){e.splice(f--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var f=e.length;f>0&&e[f-1][2]>s;f--)e[f]=e[f-1];e[f]=[i,r,s]}})(),a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,i)=>(a.f[i](e,t),t)),[])),a.u=e=>"static/js/"+e+".5192082e.chunk.js",a.miniCssF=e=>{},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.p="/heavensat-web/",(()=>{var e={51:1};a.f.i=(t,i)=>{e[t]||importScripts(a.p+a.u(t))};var t=globalThis.webpackChunkheavensat_web=globalThis.webpackChunkheavensat_web||[],i=t.push.bind(t);t.push=t=>{var[r,s,n]=t;for(var o in s)a.o(s,o)&&(a.m[o]=s[o]);for(n&&n(a);r.length;)e[r.pop()]=1;i(t)}})(),(()=>{var e=a.x;a.x=()=>a.e(719).then(e)})();a.x()})();
//# sourceMappingURL=51.acc8fde0.chunk.js.map