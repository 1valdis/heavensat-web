var c2=Object.defineProperty;var R2=(a,o,n)=>o in a?c2(a,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[o]=n;var F2=(a,o,n)=>(R2(a,typeof o!="symbol"?o+"":o,n),n);/*!
 * satellite-js v5.0.0
 * (c) 2013 Shashwat Kandadai and UCSC
 * https://github.com/shashwatak/satellite-js
 * License: MIT
 */var H0=Math.PI,h0=H0*2,i2=H0/180,a1=1440,o1=398600.8,Y0=6378.135,N0=60/Math.sqrt(Y0*Y0*Y0/o1),j2=Y0*N0/60,v1=1/N0,c0=.001082616,n1=-253881e-11,i1=-165597e-11,R0=n1/c0,g2=2/3;function d1(a,o){for(var n=[31,a%4===0?29:28,31,30,31,30,31,31,30,31,30,31],d=Math.floor(o),r=1,v=0;d>v+n[r-1]&&r<12;)v+=n[r-1],r+=1;var x=r,e=d-v,m=(o-d)*24,s=Math.floor(m);m=(m-s)*60;var f=Math.floor(m),y=(m-f)*60;return{mon:x,day:e,hr:s,minute:f,sec:y}}function X2(a,o,n,d,r,v){var x=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return 367*a-Math.floor(7*(a+Math.floor((o+9)/12))*.25)+Math.floor(275*o/9)+n+17210135e-1+((x/6e4+v/60+r)/60+d)/24}function C2(a,o,n,d,r,v,x){if(a instanceof Date){var e=a;return X2(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())}return X2(a,o,n,d,r,v,x)}function $2(a,o){var n=a.e3,d=a.ee2,r=a.peo,v=a.pgho,x=a.pho,e=a.pinco,m=a.plo,s=a.se2,f=a.se3,y=a.sgh2,z=a.sgh3,U=a.sgh4,B=a.sh2,K=a.sh3,H=a.si2,E=a.si3,c=a.sl2,k=a.sl3,$=a.sl4,I=a.t,l=a.xgh2,b=a.xgh3,P=a.xgh4,F=a.xh2,R=a.xh3,X=a.xi2,u=a.xi3,i0=a.xl2,_=a.xl3,a0=a.xl4,M=a.zmol,d0=a.zmos,G=o.init,O=o.opsmode,m0=o.ep,o0=o.inclp,p=o.nodep,u0=o.argpp,l0=o.mp,h,g,Z,S,W,L,q0,v0,f0,q,j,Q,T,A,V,w,t,N,J,Y,D,z0=119459e-10,x0=.01675,b0=.00015835218,s0=.0549;D=d0+z0*I,G==="y"&&(D=d0),Y=D+2*x0*Math.sin(D),t=Math.sin(Y),q=.5*t*t-.25,j=-.5*t*Math.cos(Y);var S0=s*q+f*j,A0=H*q+E*j,p0=c*q+k*j+$*t,g0=y*q+z*j+U*t,e0=B*q+K*j;D=M+b0*I,G==="y"&&(D=M),Y=D+2*s0*Math.sin(D),t=Math.sin(Y),q=.5*t*t-.25,j=-.5*t*Math.cos(Y);var E0=d*q+n*j,F0=X*q+u*j,n0=i0*q+_*j+a0*t,M0=l*q+b*j+P*t,$0=F*q+R*j;return Q=S0+E0,V=A0+F0,w=p0+n0,T=g0+M0,A=e0+$0,G==="n"&&(Q-=r,V-=e,w-=m,T-=v,A-=x,o0+=V,m0+=Q,S=Math.sin(o0),Z=Math.cos(o0),o0>=.2?(A/=S,T-=Z*A,u0+=T,p+=A,l0+=w):(L=Math.sin(p),W=Math.cos(p),h=S*L,g=S*W,q0=A*W+V*Z*L,v0=-A*L+V*Z*W,h+=q0,g+=v0,p%=h0,p<0&&O==="a"&&(p+=h0),N=l0+u0+Z*p,f0=w+T-V*p*S,N+=f0,J=p,p=Math.atan2(h,g),p<0&&O==="a"&&(p+=h0),Math.abs(J-p)>H0&&(p<J?p+=h0:p-=h0),l0+=w,u0=N-l0-Z*p)),{ep:m0,inclp:o0,nodep:p,argpp:u0,mp:l0}}function r1(a){var o=a.epoch,n=a.ep,d=a.argpp,r=a.tc,v=a.inclp,x=a.nodep,e=a.np,m,s,f,y,z,U,B,K,H,E,c,k,$,I,l,b,P,F,R,X,u,i0,_,a0,M,d0,G,O,m0,o0,p,u0,l0,h,g,Z,S,W,L,q0,v0,f0,q,j,Q,T,A,V,w,t,N,J,Y,D,z0,x0,b0,s0,S0,A0,p0,g0,e0,E0=.01675,F0=.0549,n0=29864797e-13,M0=47968065e-14,$0=.39785416,V0=.91744867,t0=.1945905,_0=-.98088458,C0=e,O0=n,X0=Math.sin(x),k0=Math.cos(x),w0=Math.sin(d),j0=Math.cos(d),P0=Math.sin(v),Z0=Math.cos(v),i=O0*O0,L0=1-i,I0=Math.sqrt(L0),W0=0,C=0,a2=0,d2=0,r2=0,G0=o+18261.5+r/1440,B0=(4.523602-.00092422029*G0)%h0,y0=Math.sin(B0),D0=Math.cos(B0),o2=.91375164-.03568096*D0,v2=Math.sqrt(1-o2*o2),U0=.089683511*y0/v2,T0=Math.sqrt(1-U0*U0),r0=5.8351514+.001944368*G0,J0=.39785416*y0/v2,p2=T0*D0+.91744867*U0*y0;J0=Math.atan2(J0,p2),J0+=r0-B0;var e2=Math.cos(J0),M2=Math.sin(J0);X=t0,u=_0,a0=V0,M=$0,i0=k0,_=X0,c=n0;for(var t2=1/C0,h2=0;h2<2;)h2+=1,m=X*i0+u*a0*_,f=-u*i0+X*a0*_,B=-X*_+u*a0*i0,K=u*M,H=u*_+X*a0*i0,E=X*M,s=Z0*B+P0*K,y=Z0*H+P0*E,z=-P0*B+Z0*K,U=-P0*H+Z0*E,k=m*j0+s*w0,$=f*j0+y*w0,I=-m*w0+s*j0,l=-f*w0+y*j0,b=z*w0,P=U*w0,F=z*j0,R=U*j0,p0=12*k*k-3*I*I,g0=24*k*$-6*I*l,e0=12*$*$-3*l*l,J=3*(m*m+s*s)+p0*i,Y=6*(m*f+s*y)+g0*i,D=3*(f*f+y*y)+e0*i,z0=-6*m*z+i*(-24*k*F-6*I*b),x0=-6*(m*U+f*z)+i*(-24*($*F+k*R)+-6*(I*P+l*b)),b0=-6*f*U+i*(-24*$*R-6*l*P),s0=6*s*z+i*(24*k*b-6*I*F),S0=6*(y*z+s*U)+i*(24*($*b+k*P)-6*(l*F+I*R)),A0=6*y*U+i*(24*$*P-6*l*R),J=J+J+L0*p0,Y=Y+Y+L0*g0,D=D+D+L0*e0,A=c*t2,T=-.5*A/I0,V=A*I0,Q=-15*O0*V,w=k*I+$*l,t=$*I+k*l,N=$*l-k*I,h2===1&&(d0=Q,G=T,O=A,m0=V,o0=w,p=t,u0=N,l0=J,h=Y,g=D,Z=z0,S=x0,W=b0,L=s0,q0=S0,v0=A0,f0=p0,q=g0,j=e0,X=e2,u=M2,a0=o2,M=v2,i0=T0*k0+U0*X0,_=X0*T0-k0*U0,c=M0);var m2=(4.7199672+(.2299715*G0-r0))%h0,s2=(6.2565837+.017201977*G0)%h0,y2=2*d0*p,K0=2*d0*u0,Q0=2*G*S,u2=2*G*(W-Z),b2=-2*O*h,q2=-2*O*(g-l0),w2=-2*O*(-21-9*i)*E0,n2=2*m0*q,S2=2*m0*(j-f0),A2=-18*m0*E0,l2=-2*G*q0,f2=-2*G*(v0-L),x2=2*Q*t,U2=2*Q*N,T2=2*T*x0,B2=2*T*(b0-z0),H2=-2*A*Y,_2=-2*A*(D-J),G2=-2*A*(-21-9*i)*F0,N2=2*V*g0,W2=2*V*(e0-p0),J2=-18*V*F0,K2=-2*T*S0,Q2=-2*T*(A0-s0);return{snodm:X0,cnodm:k0,sinim:P0,cosim:Z0,sinomm:w0,cosomm:j0,day:G0,e3:U2,ee2:x2,em:O0,emsq:i,gam:r0,peo:W0,pgho:d2,pho:r2,pinco:C,plo:a2,rtemsq:I0,se2:y2,se3:K0,sgh2:n2,sgh3:S2,sgh4:A2,sh2:l2,sh3:f2,si2:Q0,si3:u2,sl2:b2,sl3:q2,sl4:w2,s1:Q,s2:T,s3:A,s4:V,s5:w,s6:t,s7:N,ss1:d0,ss2:G,ss3:O,ss4:m0,ss5:o0,ss6:p,ss7:u0,sz1:l0,sz2:h,sz3:g,sz11:Z,sz12:S,sz13:W,sz21:L,sz22:q0,sz23:v0,sz31:f0,sz32:q,sz33:j,xgh2:N2,xgh3:W2,xgh4:J2,xh2:K2,xh3:Q2,xi2:T2,xi3:B2,xl2:H2,xl3:_2,xl4:G2,nm:C0,z1:J,z2:Y,z3:D,z11:z0,z12:x0,z13:b0,z21:s0,z22:S0,z23:A0,z31:p0,z32:g0,z33:e0,zmol:m2,zmos:s2}}function h1(a){var o=a.cosim,n=a.argpo,d=a.s1,r=a.s2,v=a.s3,x=a.s4,e=a.s5,m=a.sinim,s=a.ss1,f=a.ss2,y=a.ss3,z=a.ss4,U=a.ss5,B=a.sz1,K=a.sz3,H=a.sz11,E=a.sz13,c=a.sz21,k=a.sz23,$=a.sz31,I=a.sz33,l=a.t,b=a.tc,P=a.gsto,F=a.mo,R=a.mdot,X=a.no,u=a.nodeo,i0=a.nodedot,_=a.xpidot,a0=a.z1,M=a.z3,d0=a.z11,G=a.z13,O=a.z21,m0=a.z23,o0=a.z31,p=a.z33,u0=a.ecco,l0=a.eccsq,h=a.emsq,g=a.em,Z=a.argpm,S=a.inclm,W=a.mm,L=a.nm,q0=a.nodem,v0=a.irez,f0=a.atime,q=a.d2201,j=a.d2211,Q=a.d3210,T=a.d3222,A=a.d4410,V=a.d4422,w=a.d5220,t=a.d5232,N=a.d5421,J=a.d5433,Y=a.dedt,D=a.didt,z0=a.dmdt,x0=a.dnodt,b0=a.domdt,s0=a.del1,S0=a.del2,A0=a.del3,p0=a.xfact,g0=a.xlamo,e0=a.xli,E0=a.xni,F0,n0,M0,$0,V0,t0,_0,C0,O0,X0,k0,w0,j0,P0,Z0,i,L0,I0,W0,C,a2,d2,r2,G0,B0,y0,D0,o2,v2,U0,T0,r0,J0=17891679e-13,p2=21460748e-13,e2=22123015e-14,M2=17891679e-13,t2=73636953e-16,h2=21765803e-16,m2=.0043752690880113,s2=37393792e-14,y2=11428639e-14,K0=.00015835218,Q0=119459e-10;v0=0,L<.0052359877&&L>.0034906585&&(v0=1),L>=.00826&&L<=.00924&&g>=.5&&(v0=2);var u2=s*Q0*U,b2=f*Q0*(H+E),q2=-Q0*y*(B+K-14-6*h),w2=z*Q0*($+I-6),n2=-Q0*f*(c+k);(S<.052359877||S>H0-.052359877)&&(n2=0),m!==0&&(n2/=m);var S2=w2-o*n2;Y=u2+d*K0*e,D=b2+r*K0*(d0+G),z0=q2-K0*v*(a0+M-14-6*h);var A2=x*K0*(o0+p-6),l2=-K0*r*(O+m0);(S<.052359877||S>H0-.052359877)&&(l2=0),b0=S2+A2,x0=n2,m!==0&&(b0-=o/m*l2,x0+=l2/m);var f2=0,x2=(P+b*m2)%h0;if(g+=Y*l,S+=D*l,Z+=b0*l,q0+=x0*l,W+=z0*l,v0!==0){if(U0=Math.pow(L/N0,g2),v0===2){T0=o*o;var U2=g;g=u0;var T2=h;h=l0,r0=g*h,P0=-.306-(g-.64)*.44,g<=.65?(Z0=3.616-13.247*g+16.29*h,L0=-19.302+117.39*g-228.419*h+156.591*r0,I0=-18.9068+109.7927*g-214.6334*h+146.5816*r0,W0=-41.122+242.694*g-471.094*h+313.953*r0,C=-146.407+841.88*g-1629.014*h+1083.435*r0,a2=-532.114+3017.977*g-5740.032*h+3708.276*r0):(Z0=-72.099+331.819*g-508.738*h+266.724*r0,L0=-346.844+1582.851*g-2415.925*h+1246.113*r0,I0=-342.585+1554.908*g-2366.899*h+1215.972*r0,W0=-1052.797+4758.686*g-7193.992*h+3651.957*r0,C=-3581.69+16178.11*g-24462.77*h+12422.52*r0,g>.715?a2=-5149.66+29936.92*g-54087.36*h+31324.56*r0:a2=1464.74-4664.75*g+3763.64*h),g<.7?(G0=-919.2277+4988.61*g-9064.77*h+5542.21*r0,d2=-822.71072+4568.6173*g-8491.4146*h+5337.524*r0,r2=-853.666+4690.25*g-8624.77*h+5341.4*r0):(G0=-37995.78+161616.52*g-229838.2*h+109377.94*r0,d2=-51752.104+218913.95*g-309468.16*h+146349.42*r0,r2=-40023.88+170470.89*g-242699.48*h+115605.82*r0),B0=m*m,F0=.75*(1+2*o+T0),n0=1.5*B0,$0=1.875*m*(1-2*o-3*T0),V0=-1.875*m*(1+2*o-3*T0),_0=35*B0*F0,C0=39.375*B0*B0,O0=9.84375*m*(B0*(1-2*o-5*T0)+.33333333*(-2+4*o+6*T0)),X0=m*(4.92187512*B0*(-2-4*o+10*T0)+6.56250012*(1+2*o-3*T0)),k0=29.53125*m*(2-8*o+T0*(-12+8*o+10*T0)),w0=29.53125*m*(-2-8*o+T0*(12+8*o-10*T0)),o2=L*L,v2=U0*U0,D0=3*o2*v2,y0=D0*M2,q=y0*F0*P0,j=y0*n0*Z0,D0*=U0,y0=D0*s2,Q=y0*$0*L0,T=y0*V0*I0,D0*=U0,y0=2*D0*t2,A=y0*_0*W0,V=y0*C0*C,D0*=U0,y0=D0*y2,w=y0*O0*a2,t=y0*X0*r2,y0=2*D0*h2,N=y0*k0*d2,J=y0*w0*G0,g0=(F+u+u-(x2+x2))%h0,p0=R+z0+2*(i0+x0-m2)-X,g=U2,h=T2}v0===1&&(j0=1+h*(-2.5+.8125*h),L0=1+2*h,i=1+h*(-6+6.60937*h),F0=.75*(1+o)*(1+o),M0=.9375*m*m*(1+3*o)-.75*(1+o),t0=1+o,t0*=1.875*t0*t0,s0=3*L*L*U0*U0,S0=2*s0*F0*j0*J0,A0=3*s0*t0*i*e2*U0,s0=s0*M0*L0*p2*U0,g0=(F+u+n-x2)%h0,p0=R+_+z0+b0+x0-(X+m2)),e0=g0,E0=X,f0=0,L=X+f2}return{em:g,argpm:Z,inclm:S,mm:W,nm:L,nodem:q0,irez:v0,atime:f0,d2201:q,d2211:j,d3210:Q,d3222:T,d4410:A,d4422:V,d5220:w,d5232:t,d5421:N,d5433:J,dedt:Y,didt:D,dmdt:z0,dndt:f2,dnodt:x0,domdt:b0,del1:s0,del2:S0,del3:A0,xfact:p0,xlamo:g0,xli:e0,xni:E0}}function k2(a){var o=(a-2451545)/36525,n=-62e-7*o*o*o+.093104*o*o+(876600*3600+8640184812866e-6)*o+67310.54841;return n=n*i2/240%h0,n<0&&(n+=h0),n}function O2(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?k2(C2.apply(void 0,arguments)):k2.apply(void 0,arguments)}function m1(a){var o=a.ecco,n=a.epoch,d=a.inclo,r=a.opsmode,v=a.no,x=o*o,e=1-x,m=Math.sqrt(e),s=Math.cos(d),f=s*s,y=Math.pow(N0/v,g2),z=.75*c0*(3*f-1)/(m*e),U=z/(y*y),B=y*(1-U*U-U*(1/3+134*U*U/81));U=z/(B*B),v/=1+U;var K=Math.pow(N0/v,g2),H=Math.sin(d),E=K*e,c=1-5*f,k=-c-f-f,$=1/K,I=E*E,l=K*(1-o),b="n",P;if(r==="a"){var F=n-7305,R=Math.floor(F+1e-8),X=F-R,u=.017202791694070362,i0=1.7321343856509375,_=5075514194322695e-30,a0=u+h0;P=(i0+u*R+a0*X+F*F*_)%h0,P<0&&(P+=h0)}else P=O2(n+24332815e-1);return{no:v,method:b,ainv:$,ao:K,con41:k,con42:c,cosio:s,cosio2:f,eccsq:x,omeosq:e,posq:I,rp:l,rteosq:m,sinio:H,gsto:P}}function l1(a){var o=a.irez,n=a.d2201,d=a.d2211,r=a.d3210,v=a.d3222,x=a.d4410,e=a.d4422,m=a.d5220,s=a.d5232,f=a.d5421,y=a.d5433,z=a.dedt,U=a.del1,B=a.del2,K=a.del3,H=a.didt,E=a.dmdt,c=a.dnodt,k=a.domdt,$=a.argpo,I=a.argpdot,l=a.t,b=a.tc,P=a.gsto,F=a.xfact,R=a.xlamo,X=a.no,u=a.atime,i0=a.em,_=a.argpm,a0=a.inclm,M=a.xli,d0=a.mm,G=a.xni,O=a.nodem,m0=a.nm,o0=.13130908,p=2.8843198,u0=.37448087,l0=5.7686396,h=.95240898,g=1.8014998,Z=1.050833,S=4.4108898,W=.0043752690880113,L=720,q0=-720,v0=259200,f0,q,j,Q,T,A,V,w,t=0,N=0,J=(P+b*W)%h0;if(i0+=z*l,a0+=H*l,_+=k*l,O+=c*l,d0+=E*l,o!==0){(u===0||l*u<=0||Math.abs(l)<Math.abs(u))&&(u=0,G=X,M=R),l>0?f0=L:f0=q0;for(var Y=381;Y===381;)o!==2?(V=U*Math.sin(M-o0)+B*Math.sin(2*(M-p))+K*Math.sin(3*(M-u0)),T=G+F,A=U*Math.cos(M-o0)+2*B*Math.cos(2*(M-p))+3*K*Math.cos(3*(M-u0)),A*=T):(w=$+I*u,j=w+w,q=M+M,V=n*Math.sin(j+M-l0)+d*Math.sin(M-l0)+r*Math.sin(w+M-h)+v*Math.sin(-w+M-h)+x*Math.sin(j+q-g)+e*Math.sin(q-g)+m*Math.sin(w+M-Z)+s*Math.sin(-w+M-Z)+f*Math.sin(w+q-S)+y*Math.sin(-w+q-S),T=G+F,A=n*Math.cos(j+M-l0)+d*Math.cos(M-l0)+r*Math.cos(w+M-h)+v*Math.cos(-w+M-h)+m*Math.cos(w+M-Z)+s*Math.cos(-w+M-Z)+2*(x*Math.cos(j+q-g)+e*Math.cos(q-g)+f*Math.cos(w+q-S)+y*Math.cos(-w+q-S)),A*=T),Math.abs(l-u)>=L?Y=381:(N=l-u,Y=0),Y===381&&(M+=T*f0+V*v0,G+=V*f0+A*v0,u+=f0);m0=G+V*N+A*N*N*.5,Q=M+T*N+V*N*N*.5,o!==1?(d0=Q-2*O+2*J,t=m0-X):(d0=Q-O-_+J,t=m0-X),m0=X+t}return{atime:u,em:i0,argpm:_,inclm:a0,xli:M,mm:d0,xni:G,nodem:O,dndt:t,nm:m0}}function Z2(a,o){var n,d,r,v,x,e,m,s,f,y,z,U,B,K,H,E,c,k,$,I,l,b,P,F,R,X,u,i0=15e-13;a.t=o,a.error=0;var _=a.mo+a.mdot*a.t,a0=a.argpo+a.argpdot*a.t,M=a.nodeo+a.nodedot*a.t;f=a0,l=_;var d0=a.t*a.t;if(P=M+a.nodecf*d0,c=1-a.cc1*a.t,k=a.bstar*a.cc4*a.t,$=a.t2cof*d0,a.isimp!==1){m=a.omgcof*a.t;var G=1+a.eta*Math.cos(_);e=a.xmcof*(G*G*G-a.delmo),E=m+e,l=_+E,f=a0-E,U=d0*a.t,B=U*a.t,c=c-a.d2*d0-a.d3*U-a.d4*B,k+=a.bstar*a.cc5*(Math.sin(l)-a.sinmao),$=$+a.t3cof*U+B*(a.t4cof+a.t*a.t5cof)}b=a.no;var O=a.ecco;if(I=a.inclo,a.method==="d"){K=a.t;var m0={irez:a.irez,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,del1:a.del1,del2:a.del2,del3:a.del3,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,argpo:a.argpo,argpdot:a.argpdot,t:a.t,tc:K,gsto:a.gsto,xfact:a.xfact,xlamo:a.xlamo,no:a.no,atime:a.atime,em:O,argpm:f,inclm:I,xli:a.xli,mm:l,xni:a.xni,nodem:P,nm:b},o0=l1(m0);O=o0.em,f=o0.argpm,I=o0.inclm,l=o0.mm,P=o0.nodem,b=o0.nm}if(b<=0)return a.error=2,[!1,!1];var p=Math.pow(N0/b,g2)*c*c;if(b=N0/Math.pow(p,1.5),O-=k,O>=1||O<-.001)return a.error=1,[!1,!1];O<1e-6&&(O=1e-6),l+=a.no*$,R=l+f+P,P%=h0,f%=h0,R%=h0,l=(R-f-P)%h0;var u0=Math.sin(I),l0=Math.cos(I),h=O;if(F=I,y=f,u=P,X=l,v=u0,r=l0,a.method==="d"){var g={inclo:a.inclo,init:"n",ep:h,inclp:F,nodep:u,argpp:y,mp:X,opsmode:a.operationmode},Z=$2(a,g);if(h=Z.ep,u=Z.nodep,y=Z.argpp,X=Z.mp,F=Z.inclp,F<0&&(F=-F,u+=H0,y-=H0),h<0||h>1)return a.error=3,[!1,!1]}a.method==="d"&&(v=Math.sin(F),r=Math.cos(F),a.aycof=-.5*R0*v,Math.abs(r+1)>15e-13?a.xlcof=-.25*R0*v*(3+5*r)/(1+r):a.xlcof=-.25*R0*v*(3+5*r)/i0);var S=h*Math.cos(y);E=1/(p*(1-h*h));var W=h*Math.sin(y)+E*a.aycof,L=X+y+u+E*a.xlcof*S,q0=(L-u)%h0;s=q0,H=9999.9;for(var v0=1;Math.abs(H)>=1e-12&&v0<=10;)d=Math.sin(s),n=Math.cos(s),H=1-n*S-d*W,H=(q0-W*n+S*d-s)/H,Math.abs(H)>=.95&&(H>0?H=.95:H=-.95),s+=H,v0+=1;var f0=S*n+W*d,q=S*d-W*n,j=S*S+W*W,Q=p*(1-j);if(Q<0)return a.error=4,[!1,!1];var T=p*(1-f0),A=Math.sqrt(p)*q/T,V=Math.sqrt(Q)/T,w=Math.sqrt(1-j);E=q/(1+w);var t=p/T*(d-W-S*E),N=p/T*(n-S+W*E);z=Math.atan2(t,N);var J=(N+N)*t,Y=1-2*t*t;E=1/Q;var D=.5*c0*E,z0=D*E;a.method==="d"&&(x=r*r,a.con41=3*x-1,a.x1mth2=1-x,a.x7thm1=7*x-1);var x0=T*(1-1.5*z0*w*a.con41)+.5*D*a.x1mth2*Y;if(x0<1)return a.error=6,{position:!1,velocity:!1};z-=.25*z0*a.x7thm1*J;var b0=u+1.5*z0*r*J,s0=F+1.5*z0*r*v*Y,S0=A-b*D*a.x1mth2*J/N0,A0=V+b*D*(a.x1mth2*Y+1.5*a.con41)/N0,p0=Math.sin(z),g0=Math.cos(z),e0=Math.sin(b0),E0=Math.cos(b0),F0=Math.sin(s0),n0=Math.cos(s0),M0=-e0*n0,$0=E0*n0,V0=M0*p0+E0*g0,t0=$0*p0+e0*g0,_0=F0*p0,C0=M0*g0-E0*p0,O0=$0*g0-e0*p0,X0=F0*g0,k0={x:x0*V0*Y0,y:x0*t0*Y0,z:x0*_0*Y0},w0={x:(S0*V0+A0*C0)*j2,y:(S0*t0+A0*O0)*j2,z:(S0*_0+A0*X0)*j2};return{position:k0,velocity:w0}}function x1(a,o){var n=o.opsmode,d=o.satn,r=o.epoch,v=o.xbstar,x=o.xecco,e=o.xargpo,m=o.xinclo,s=o.xmo,f=o.xno,y=o.xnodeo,z,U,B,K,H,E,c,k,$,I,l,b,P,F,R,X,u,i0,_,a0,M,d0,G,O,m0,o0,p,u0,l0,h,g,Z,S,W,L,q0,v0,f0,q,j,Q,T,A,V,w,t,N,J,Y,D,z0,x0,b0,s0,S0,A0,p0=15e-13;a.isimp=0,a.method="n",a.aycof=0,a.con41=0,a.cc1=0,a.cc4=0,a.cc5=0,a.d2=0,a.d3=0,a.d4=0,a.delmo=0,a.eta=0,a.argpdot=0,a.omgcof=0,a.sinmao=0,a.t=0,a.t2cof=0,a.t3cof=0,a.t4cof=0,a.t5cof=0,a.x1mth2=0,a.x7thm1=0,a.mdot=0,a.nodedot=0,a.xlcof=0,a.xmcof=0,a.nodecf=0,a.irez=0,a.d2201=0,a.d2211=0,a.d3210=0,a.d3222=0,a.d4410=0,a.d4422=0,a.d5220=0,a.d5232=0,a.d5421=0,a.d5433=0,a.dedt=0,a.del1=0,a.del2=0,a.del3=0,a.didt=0,a.dmdt=0,a.dnodt=0,a.domdt=0,a.e3=0,a.ee2=0,a.peo=0,a.pgho=0,a.pho=0,a.pinco=0,a.plo=0,a.se2=0,a.se3=0,a.sgh2=0,a.sgh3=0,a.sgh4=0,a.sh2=0,a.sh3=0,a.si2=0,a.si3=0,a.sl2=0,a.sl3=0,a.sl4=0,a.gsto=0,a.xfact=0,a.xgh2=0,a.xgh3=0,a.xgh4=0,a.xh2=0,a.xh3=0,a.xi2=0,a.xi3=0,a.xl2=0,a.xl3=0,a.xl4=0,a.xlamo=0,a.zmol=0,a.zmos=0,a.atime=0,a.xli=0,a.xni=0,a.bstar=v,a.ecco=x,a.argpo=e,a.inclo=m,a.mo=s,a.no=f,a.nodeo=y,a.operationmode=n;var g0=78/Y0+1,e0=42/Y0,E0=e0*e0*e0*e0;a.init="y",a.t=0;var F0={satn:d,ecco:a.ecco,epoch:r,inclo:a.inclo,no:a.no,method:a.method,opsmode:a.operationmode},n0=m1(F0),M0=n0.ao,$0=n0.con42,V0=n0.cosio,t0=n0.cosio2,_0=n0.eccsq,C0=n0.omeosq,O0=n0.posq,X0=n0.rp,k0=n0.rteosq,w0=n0.sinio;if(a.no=n0.no,a.con41=n0.con41,a.gsto=n0.gsto,a.a=Math.pow(a.no*v1,-2/3),a.alta=a.a*(1+a.ecco)-1,a.altp=a.a*(1-a.ecco)-1,a.error=0,C0>=0||a.no>=0){if(a.isimp=0,X0<220/Y0+1&&(a.isimp=1),p=g0,M=E0,i0=(X0-1)*Y0,i0<156){p=i0-78,i0<98&&(p=20);var j0=(120-p)/Y0;M=j0*j0*j0*j0,p=p/Y0+1}_=1/O0,t=1/(M0-p),a.eta=M0*a.ecco*t,b=a.eta*a.eta,l=a.ecco*a.eta,a0=Math.abs(1-b),E=M*Math.pow(t,4),c=E/Math.pow(a0,3.5),K=c*a.no*(M0*(1+1.5*b+l*(4+b))+.375*c0*t/a0*a.con41*(8+3*b*(8+b))),a.cc1=a.bstar*K,H=0,a.ecco>1e-4&&(H=-2*E*t*R0*a.no*w0/a.ecco),a.x1mth2=1-t0,a.cc4=2*a.no*c*M0*C0*(a.eta*(2+.5*b)+a.ecco*(.5+2*b)-c0*t/(M0*a0)*(-3*a.con41*(1-2*l+b*(1.5-.5*l))+.75*a.x1mth2*(2*b-l*(1+b))*Math.cos(2*a.argpo))),a.cc5=2*c*M0*C0*(1+2.75*(b+l)+l*b),k=t0*t0,A=1.5*c0*_*a.no,V=.5*A*c0*_,w=-.46875*i1*_*_*a.no,a.mdot=a.no+.5*A*k0*a.con41+.0625*V*k0*(13-78*t0+137*k),a.argpdot=-.5*A*$0+.0625*V*(7-114*t0+395*k)+w*(3-36*t0+49*k),J=-A*V0,a.nodedot=J+(.5*V*(4-19*t0)+2*w*(3-7*t0))*V0,N=a.argpdot+a.nodedot,a.omgcof=a.bstar*H*Math.cos(a.argpo),a.xmcof=0,a.ecco>1e-4&&(a.xmcof=-g2*E*a.bstar/l),a.nodecf=3.5*C0*J*a.cc1,a.t2cof=1.5*a.cc1,Math.abs(V0+1)>15e-13?a.xlcof=-.25*R0*w0*(3+5*V0)/(1+V0):a.xlcof=-.25*R0*w0*(3+5*V0)/p0,a.aycof=-.5*R0*w0;var P0=1+a.eta*Math.cos(a.mo);if(a.delmo=P0*P0*P0,a.sinmao=Math.sin(a.mo),a.x7thm1=7*t0-1,2*H0/a.no>=225){a.method="d",a.isimp=1,Q=0,R=a.inclo;var Z0={epoch:r,ep:a.ecco,argpp:a.argpo,tc:Q,inclp:a.inclo,nodep:a.nodeo,np:a.no,e3:a.e3,ee2:a.ee2,peo:a.peo,pgho:a.pgho,pho:a.pho,pinco:a.pinco,plo:a.plo,se2:a.se2,se3:a.se3,sgh2:a.sgh2,sgh3:a.sgh3,sgh4:a.sgh4,sh2:a.sh2,sh3:a.sh3,si2:a.si2,si3:a.si3,sl2:a.sl2,sl3:a.sl3,sl4:a.sl4,xgh2:a.xgh2,xgh3:a.xgh3,xgh4:a.xgh4,xh2:a.xh2,xh3:a.xh3,xi2:a.xi2,xi3:a.xi3,xl2:a.xl2,xl3:a.xl3,xl4:a.xl4,zmol:a.zmol,zmos:a.zmos},i=r1(Z0);a.e3=i.e3,a.ee2=i.ee2,a.peo=i.peo,a.pgho=i.pgho,a.pho=i.pho,a.pinco=i.pinco,a.plo=i.plo,a.se2=i.se2,a.se3=i.se3,a.sgh2=i.sgh2,a.sgh3=i.sgh3,a.sgh4=i.sgh4,a.sh2=i.sh2,a.sh3=i.sh3,a.si2=i.si2,a.si3=i.si3,a.sl2=i.sl2,a.sl3=i.sl3,a.sl4=i.sl4,U=i.sinim,z=i.cosim,$=i.em,I=i.emsq,d0=i.s1,G=i.s2,O=i.s3,m0=i.s4,o0=i.s5,u0=i.ss1,l0=i.ss2,h=i.ss3,g=i.ss4,Z=i.ss5,S=i.sz1,W=i.sz3,L=i.sz11,q0=i.sz13,v0=i.sz21,f0=i.sz23,q=i.sz31,j=i.sz33,a.xgh2=i.xgh2,a.xgh3=i.xgh3,a.xgh4=i.xgh4,a.xh2=i.xh2,a.xh3=i.xh3,a.xi2=i.xi2,a.xi3=i.xi3,a.xl2=i.xl2,a.xl3=i.xl3,a.xl4=i.xl4,a.zmol=i.zmol,a.zmos=i.zmos,u=i.nm,Y=i.z1,D=i.z3,z0=i.z11,x0=i.z13,b0=i.z21,s0=i.z23,S0=i.z31,A0=i.z33;var L0={inclo:R,init:a.init,ep:a.ecco,inclp:a.inclo,nodep:a.nodeo,argpp:a.argpo,mp:a.mo,opsmode:a.operationmode},I0=$2(a,L0);a.ecco=I0.ep,a.inclo=I0.inclp,a.nodeo=I0.nodep,a.argpo=I0.argpp,a.mo=I0.mp,P=0,F=0,X=0;var W0={cosim:z,emsq:I,argpo:a.argpo,s1:d0,s2:G,s3:O,s4:m0,s5:o0,sinim:U,ss1:u0,ss2:l0,ss3:h,ss4:g,ss5:Z,sz1:S,sz3:W,sz11:L,sz13:q0,sz21:v0,sz23:f0,sz31:q,sz33:j,t:a.t,tc:Q,gsto:a.gsto,mo:a.mo,mdot:a.mdot,no:a.no,nodeo:a.nodeo,nodedot:a.nodedot,xpidot:N,z1:Y,z3:D,z11:z0,z13:x0,z21:b0,z23:s0,z31:S0,z33:A0,ecco:a.ecco,eccsq:_0,em:$,argpm:P,inclm:R,mm:X,nm:u,nodem:F,irez:a.irez,atime:a.atime,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,del1:a.del1,del2:a.del2,del3:a.del3,xfact:a.xfact,xlamo:a.xlamo,xli:a.xli,xni:a.xni},C=h1(W0);a.irez=C.irez,a.atime=C.atime,a.d2201=C.d2201,a.d2211=C.d2211,a.d3210=C.d3210,a.d3222=C.d3222,a.d4410=C.d4410,a.d4422=C.d4422,a.d5220=C.d5220,a.d5232=C.d5232,a.d5421=C.d5421,a.d5433=C.d5433,a.dedt=C.dedt,a.didt=C.didt,a.dmdt=C.dmdt,a.dnodt=C.dnodt,a.domdt=C.domdt,a.del1=C.del1,a.del2=C.del2,a.del3=C.del3,a.xfact=C.xfact,a.xlamo=C.xlamo,a.xli=C.xli,a.xni=C.xni}a.isimp!==1&&(B=a.cc1*a.cc1,a.d2=4*M0*t*B,T=a.d2*t*a.cc1/3,a.d3=(17*M0+p)*T,a.d4=.5*T*M0*t*(221*M0+31*p)*a.cc1,a.t3cof=a.d2+2*B,a.t4cof=.25*(3*a.d3+a.cc1*(12*a.d2+10*B)),a.t5cof=.2*(3*a.d4+12*a.cc1*a.d3+6*a.d2*a.d2+15*B*(2*a.d2+B)))}Z2(a,0),a.init="n"}function g1(a,o){var n="i",d=1440/(2*H0),r=0,v={};v.error=0,v.satnum=a.substring(2,7),v.epochyr=parseInt(a.substring(18,20),10),v.epochdays=parseFloat(a.substring(20,32)),v.ndot=parseFloat(a.substring(33,43)),v.nddot=parseFloat(".".concat(parseInt(a.substring(44,50),10),"E").concat(a.substring(50,52))),v.bstar=parseFloat("".concat(a.substring(53,54),".").concat(parseInt(a.substring(54,59),10),"E").concat(a.substring(59,61))),v.inclo=parseFloat(o.substring(8,16)),v.nodeo=parseFloat(o.substring(17,25)),v.ecco=parseFloat(".".concat(o.substring(26,33))),v.argpo=parseFloat(o.substring(34,42)),v.mo=parseFloat(o.substring(43,51)),v.no=parseFloat(o.substring(52,63)),v.no/=d,v.inclo*=i2,v.nodeo*=i2,v.argpo*=i2,v.mo*=i2,v.epochyr<57?r=v.epochyr+2e3:r=v.epochyr+1900;var x=d1(r,v.epochdays),e=x.mon,m=x.day,s=x.hr,f=x.minute,y=x.sec;return v.jdsatepoch=C2(r,e,m,s,f,y),x1(v,{opsmode:n,satn:v.satnum,epoch:v.jdsatepoch-24332815e-1,xbstar:v.bstar,xecco:v.ecco,xargpo:v.argpo,xinclo:v.inclo,xmo:v.mo,xno:v.no,xnodeo:v.nodeo}),v}function f1(a){return z1(a)||p1(a)||e1(a)||M1()}function z1(a){if(Array.isArray(a))return Y2(a)}function p1(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function e1(a,o){if(a){if(typeof a=="string")return Y2(a,o);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y2(a,o)}}function Y2(a,o){(o==null||o>a.length)&&(o=a.length);for(var n=0,d=new Array(o);n<o;n++)d[n]=a[n];return d}function M1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t1(){for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];var d=o[0],r=Array.prototype.slice.call(o,1),v=C2.apply(void 0,f1(r)),x=(v-d.jdsatepoch)*a1;return Z2(d,x)}function P2(a){return a*i2}function s1(a){var o=a.longitude,n=a.latitude,d=a.height,r=6378.137,v=6356.7523142,x=(r-v)/r,e=2*x-x*x,m=r/Math.sqrt(1-e*(Math.sin(n)*Math.sin(n))),s=(m+d)*Math.cos(n)*Math.cos(o),f=(m+d)*Math.cos(n)*Math.sin(o),y=(m*(1-e)+d)*Math.sin(n);return{x:s,y:f,z:y}}function y1(a,o){var n=a.x*Math.cos(o)+a.y*Math.sin(o),d=a.x*-Math.sin(o)+a.y*Math.cos(o),r=a.z;return{x:n,y:d,z:r}}function u1(a,o){var n=a.longitude,d=a.latitude,r=s1(a),v=o.x-r.x,x=o.y-r.y,e=o.z-r.z,m=Math.sin(d)*Math.cos(n)*v+Math.sin(d)*Math.sin(n)*x-Math.cos(d)*e,s=-Math.sin(n)*v+Math.cos(n)*x,f=Math.cos(d)*Math.cos(n)*v+Math.cos(d)*Math.sin(n)*x+Math.sin(d)*e;return{topS:m,topE:s,topZ:f}}function b1(a){var o=a.topS,n=a.topE,d=a.topZ,r=Math.sqrt(o*o+n*n+d*d),v=Math.asin(d/r),x=Math.atan2(-n,o)+H0;return{azimuth:x,elevation:v,rangeSat:r}}function q1(a,o){var n=u1(a,o);return b1(n)}class w1{constructor(o){F2(this,"charMap",new Map);F2(this,"kerningsMap",new Map);o.chars.forEach(n=>{this.charMap.set(n.char,n)}),o.kernings.forEach(n=>{this.kerningsMap.set(`${n.first},${n.second}`,n.amount)})}textToGeometry(o){return o.split("").map(n=>this.charMap.get(n)??this.charMap.get("?")).reduce((n,d,r,v)=>{let x=0;if(r!==0){const e=v[r-1];x=this.kerningsMap.get(`${e.id},${d.id}`)??0}return n.chars.push({iXY:[n.width+d.xoffset+x,d.yoffset],iUV:[d.x,d.y],iSize:[d.width,d.height]}),n.width+=d.xadvance+x,n},{width:0,chars:[]})}}function S1(a,o){const n=Math.cos(a)*Math.cos(o),d=-Math.cos(a)*Math.sin(o),r=Math.sin(a);return[d,r,n]}function z2(a){const o=a.reduce((r,v)=>r+v.length,0),n=new Float32Array(o);let d=0;for(const r of a)n.set(r,d),d+=r.length;return n}function A1(a,o){const n=a.length*o,d=new Float32Array(n);for(let r=0;r<o;r++)d.set(a,r*a.length);return d}function L2(a,...o){postMessage(a,...o)}let D2=[];const V2=new Map,E2=new Map,I2=new Map;self.onmessage=a=>{if(a.data.type==="init"){V2.clear(),E2.clear(),I2.clear();const o=new w1(a.data.msdfDefinition);D2=a.data["3LEs"].map(n=>{const d=g1(n[1],n[2]),r=o.textToGeometry(n[0].slice(2));return V2.set(d.satnum,r),E2.set(d.satnum,new Float32Array(r.chars.flatMap(v=>[v.iXY[0],v.iXY[1],v.iXY[0]+v.iSize[0],v.iXY[1],v.iXY[0]+v.iSize[0],v.iXY[1]+v.iSize[1],v.iXY[0],v.iXY[1],v.iXY[0],v.iXY[1]+v.iSize[1],v.iXY[0]+v.iSize[0],v.iXY[1]+v.iSize[1]]))),I2.set(d.satnum,new Float32Array(r.chars.flatMap(v=>[v.iUV[0],v.iUV[1],v.iUV[0]+v.iSize[0],v.iUV[1],v.iUV[0]+v.iSize[0],v.iUV[1]+v.iSize[1],v.iUV[0],v.iUV[1],v.iUV[0],v.iUV[1]+v.iSize[1],v.iUV[0]+v.iSize[0],v.iUV[1]+v.iSize[1]]))),d}).filter(n=>n.error===0),L2({type:"init",message:"ok",queryId:a.data.queryId})}else if(a.data.type==="process"){const{date:o,location:n,queryId:d}=a.data,r=O2(o),v={longitude:P2(n.longitude),latitude:P2(n.latitude),height:n.altitude/1e3},x=D2.map(z=>{const U=t1(z,o);if(typeof U.position!="object")return{cartesian:null,norad:z.satnum};const B=y1(U.position,r),K=q1(v,B);return{norad:z.satnum,cartesian:S1(K.elevation,K.azimuth)}}),e=x.filter(z=>z.cartesian).filter(z=>z.cartesian[1]>0),m=z2(e.map(z=>new Float32Array(z.cartesian))),s=z2(e.map(z=>A1(new Float32Array(z.cartesian),6*V2.get(z.norad).chars.length))),f=z2(e.map(z=>E2.get(z.norad))),y=z2(e.map(z=>I2.get(z.norad)));L2({type:"process",result:{failedNorads:x.filter(z=>!z.cartesian).map(z=>z.norad),propagatedPositions:m,textsOrigins:s,textsPositions:f,textsUVCoords:y},queryId:d},[m.buffer,s.buffer,f.buffer,y.buffer])}};
