var R2=Object.defineProperty;var a1=(a,o,v)=>o in a?R2(a,o,{enumerable:!0,configurable:!0,writable:!0,value:v}):a[o]=v;var F2=(a,o,v)=>(a1(a,typeof o!="symbol"?o+"":o,v),v);/*!
 * satellite-js v5.0.0
 * (c) 2013 Shashwat Kandadai and UCSC
 * https://github.com/shashwatak/satellite-js
 * License: MIT
 */var H0=Math.PI,h0=H0*2,i2=H0/180,o1=1440,v1=398600.8,Y0=6378.135,N0=60/Math.sqrt(Y0*Y0*Y0/v1),I2=Y0*N0/60,n1=1/N0,c0=.001082616,i1=-253881e-11,d1=-165597e-11,R0=i1/c0,f2=2/3;function r1(a,o){for(var v=[31,a%4===0?29:28,31,30,31,30,31,31,30,31,30,31],d=Math.floor(o),h=1,n=0;d>n+v[h-1]&&h<12;)n+=v[h-1],h+=1;var l=h,i=d-n,x=(o-d)*24,s=Math.floor(x);x=(x-s)*60;var p=Math.floor(x),y=(x-p)*60;return{mon:l,day:i,hr:s,minute:p,sec:y}}function k2(a,o,v,d,h,n){var l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return 367*a-Math.floor(7*(a+Math.floor((o+9)/12))*.25)+Math.floor(275*o/9)+v+17210135e-1+((l/6e4+n/60+h)/60+d)/24}function X2(a,o,v,d,h,n,l){if(a instanceof Date){var i=a;return k2(i.getUTCFullYear(),i.getUTCMonth()+1,i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds())}return k2(a,o,v,d,h,n,l)}function O2(a,o){var v=a.e3,d=a.ee2,h=a.peo,n=a.pgho,l=a.pho,i=a.pinco,x=a.plo,s=a.se2,p=a.se3,y=a.sgh2,$=a.sgh3,g=a.sgh4,O=a.sh2,Q=a.sh3,C=a.si2,E=a.si3,c=a.sl2,k=a.sl3,Z=a.sl4,j=a.t,f=a.xgh2,b=a.xgh3,L=a.xgh4,T=a.xh2,R=a.xh3,X=a.xi2,u=a.xi3,i0=a.xl2,_=a.xl3,a0=a.xl4,M=a.zmol,d0=a.zmos,G=o.init,B=o.opsmode,m0=o.ep,o0=o.inclp,e=o.nodep,u0=o.argpp,l0=o.mp,m,z,H,A,W,P,q0,v0,f0,q,F,K,U,S,I,w,t,N,J,V,D,z0=119459e-10,x0=.01675,b0=.00015835218,s0=.0549;D=d0+z0*j,G==="y"&&(D=d0),V=D+2*x0*Math.sin(D),t=Math.sin(V),q=.5*t*t-.25,F=-.5*t*Math.cos(V);var A0=s*q+p*F,S0=C*q+E*F,p0=c*q+k*F+Z*t,g0=y*q+$*F+g*t,e0=O*q+Q*F;D=M+b0*j,G==="y"&&(D=M),V=D+2*s0*Math.sin(D),t=Math.sin(V),q=.5*t*t-.25,F=-.5*t*Math.cos(V);var j0=d*q+v*F,F0=X*q+u*F,n0=i0*q+_*F+a0*t,M0=f*q+b*F+L*t,$0=T*q+R*F;return K=A0+j0,I=S0+F0,w=p0+n0,U=g0+M0,S=e0+$0,G==="n"&&(K-=h,I-=i,w-=x,U-=n,S-=l,o0+=I,m0+=K,A=Math.sin(o0),H=Math.cos(o0),o0>=.2?(S/=A,U-=H*S,u0+=U,e+=S,l0+=w):(P=Math.sin(e),W=Math.cos(e),m=A*P,z=A*W,q0=S*W+I*H*P,v0=-S*P+I*H*W,m+=q0,z+=v0,e%=h0,e<0&&B==="a"&&(e+=h0),N=l0+u0+H*e,f0=w+U-I*e*A,N+=f0,J=e,e=Math.atan2(m,z),e<0&&B==="a"&&(e+=h0),Math.abs(J-e)>H0&&(e<J?e+=h0:e-=h0),l0+=w,u0=N-l0-H*e)),{ep:m0,inclp:o0,nodep:e,argpp:u0,mp:l0}}function h1(a){var o=a.epoch,v=a.ep,d=a.argpp,h=a.tc,n=a.inclp,l=a.nodep,i=a.np,x,s,p,y,$,g,O,Q,C,E,c,k,Z,j,f,b,L,T,R,X,u,i0,_,a0,M,d0,G,B,m0,o0,e,u0,l0,m,z,H,A,W,P,q0,v0,f0,q,F,K,U,S,I,w,t,N,J,V,D,z0,x0,b0,s0,A0,S0,p0,g0,e0,j0=.01675,F0=.0549,n0=29864797e-13,M0=47968065e-14,$0=.39785416,E0=.91744867,t0=.1945905,_0=-.98088458,C0=i,O0=v,X0=Math.sin(l),k0=Math.cos(l),w0=Math.sin(d),I0=Math.cos(d),L0=Math.sin(n),Z0=Math.cos(n),r=O0*O0,P0=1-r,V0=Math.sqrt(P0),W0=0,Y=0,a2=0,d2=0,r2=0,G0=o+18261.5+h/1440,B0=(4.523602-.00092422029*G0)%h0,y0=Math.sin(B0),D0=Math.cos(B0),o2=.91375164-.03568096*D0,v2=Math.sqrt(1-o2*o2),U0=.089683511*y0/v2,T0=Math.sqrt(1-U0*U0),r0=5.8351514+.001944368*G0,J0=.39785416*y0/v2,p2=T0*D0+.91744867*U0*y0;J0=Math.atan2(J0,p2),J0+=r0-B0;var e2=Math.cos(J0),M2=Math.sin(J0);X=t0,u=_0,a0=E0,M=$0,i0=k0,_=X0,c=n0;for(var t2=1/C0,h2=0;h2<2;)h2+=1,x=X*i0+u*a0*_,p=-u*i0+X*a0*_,O=-X*_+u*a0*i0,Q=u*M,C=u*_+X*a0*i0,E=X*M,s=Z0*O+L0*Q,y=Z0*C+L0*E,$=-L0*O+Z0*Q,g=-L0*C+Z0*E,k=x*I0+s*w0,Z=p*I0+y*w0,j=-x*w0+s*I0,f=-p*w0+y*I0,b=$*w0,L=g*w0,T=$*I0,R=g*I0,p0=12*k*k-3*j*j,g0=24*k*Z-6*j*f,e0=12*Z*Z-3*f*f,J=3*(x*x+s*s)+p0*r,V=6*(x*p+s*y)+g0*r,D=3*(p*p+y*y)+e0*r,z0=-6*x*$+r*(-24*k*T-6*j*b),x0=-6*(x*g+p*$)+r*(-24*(Z*T+k*R)+-6*(j*L+f*b)),b0=-6*p*g+r*(-24*Z*R-6*f*L),s0=6*s*$+r*(24*k*b-6*j*T),A0=6*(y*$+s*g)+r*(24*(Z*b+k*L)-6*(f*T+j*R)),S0=6*y*g+r*(24*Z*L-6*f*R),J=J+J+P0*p0,V=V+V+P0*g0,D=D+D+P0*e0,S=c*t2,U=-.5*S/V0,I=S*V0,K=-15*O0*I,w=k*j+Z*f,t=Z*j+k*f,N=Z*f-k*j,h2===1&&(d0=K,G=U,B=S,m0=I,o0=w,e=t,u0=N,l0=J,m=V,z=D,H=z0,A=x0,W=b0,P=s0,q0=A0,v0=S0,f0=p0,q=g0,F=e0,X=e2,u=M2,a0=o2,M=v2,i0=T0*k0+U0*X0,_=X0*T0-k0*U0,c=M0);var m2=(4.7199672+(.2299715*G0-r0))%h0,s2=(6.2565837+.017201977*G0)%h0,y2=2*d0*e,K0=2*d0*u0,Q0=2*G*A,u2=2*G*(W-H),b2=-2*B*m,q2=-2*B*(z-l0),w2=-2*B*(-21-9*r)*j0,n2=2*m0*q,A2=2*m0*(F-f0),S2=-18*m0*j0,l2=-2*G*q0,z2=-2*G*(v0-P),x2=2*K*t,U2=2*K*N,T2=2*U*x0,H2=2*U*(b0-z0),_2=-2*S*V,G2=-2*S*(D-J),N2=-2*S*(-21-9*r)*F0,W2=2*I*g0,J2=2*I*(e0-p0),K2=-18*I*F0,Q2=-2*U*A0,c2=-2*U*(S0-s0);return{snodm:X0,cnodm:k0,sinim:L0,cosim:Z0,sinomm:w0,cosomm:I0,day:G0,e3:U2,ee2:x2,em:O0,emsq:r,gam:r0,peo:W0,pgho:d2,pho:r2,pinco:Y,plo:a2,rtemsq:V0,se2:y2,se3:K0,sgh2:n2,sgh3:A2,sgh4:S2,sh2:l2,sh3:z2,si2:Q0,si3:u2,sl2:b2,sl3:q2,sl4:w2,s1:K,s2:U,s3:S,s4:I,s5:w,s6:t,s7:N,ss1:d0,ss2:G,ss3:B,ss4:m0,ss5:o0,ss6:e,ss7:u0,sz1:l0,sz2:m,sz3:z,sz11:H,sz12:A,sz13:W,sz21:P,sz22:q0,sz23:v0,sz31:f0,sz32:q,sz33:F,xgh2:W2,xgh3:J2,xgh4:K2,xh2:Q2,xh3:c2,xi2:T2,xi3:H2,xl2:_2,xl3:G2,xl4:N2,nm:C0,z1:J,z2:V,z3:D,z11:z0,z12:x0,z13:b0,z21:s0,z22:A0,z23:S0,z31:p0,z32:g0,z33:e0,zmol:m2,zmos:s2}}function m1(a){var o=a.cosim,v=a.argpo,d=a.s1,h=a.s2,n=a.s3,l=a.s4,i=a.s5,x=a.sinim,s=a.ss1,p=a.ss2,y=a.ss3,$=a.ss4,g=a.ss5,O=a.sz1,Q=a.sz3,C=a.sz11,E=a.sz13,c=a.sz21,k=a.sz23,Z=a.sz31,j=a.sz33,f=a.t,b=a.tc,L=a.gsto,T=a.mo,R=a.mdot,X=a.no,u=a.nodeo,i0=a.nodedot,_=a.xpidot,a0=a.z1,M=a.z3,d0=a.z11,G=a.z13,B=a.z21,m0=a.z23,o0=a.z31,e=a.z33,u0=a.ecco,l0=a.eccsq,m=a.emsq,z=a.em,H=a.argpm,A=a.inclm,W=a.mm,P=a.nm,q0=a.nodem,v0=a.irez,f0=a.atime,q=a.d2201,F=a.d2211,K=a.d3210,U=a.d3222,S=a.d4410,I=a.d4422,w=a.d5220,t=a.d5232,N=a.d5421,J=a.d5433,V=a.dedt,D=a.didt,z0=a.dmdt,x0=a.dnodt,b0=a.domdt,s0=a.del1,A0=a.del2,S0=a.del3,p0=a.xfact,g0=a.xlamo,e0=a.xli,j0=a.xni,F0,n0,M0,$0,E0,t0,_0,C0,O0,X0,k0,w0,I0,L0,Z0,r,P0,V0,W0,Y,a2,d2,r2,G0,B0,y0,D0,o2,v2,U0,T0,r0,J0=17891679e-13,p2=21460748e-13,e2=22123015e-14,M2=17891679e-13,t2=73636953e-16,h2=21765803e-16,m2=.0043752690880113,s2=37393792e-14,y2=11428639e-14,K0=.00015835218,Q0=119459e-10;v0=0,P<.0052359877&&P>.0034906585&&(v0=1),P>=.00826&&P<=.00924&&z>=.5&&(v0=2);var u2=s*Q0*g,b2=p*Q0*(C+E),q2=-Q0*y*(O+Q-14-6*m),w2=$*Q0*(Z+j-6),n2=-Q0*p*(c+k);(A<.052359877||A>H0-.052359877)&&(n2=0),x!==0&&(n2/=x);var A2=w2-o*n2;V=u2+d*K0*i,D=b2+h*K0*(d0+G),z0=q2-K0*n*(a0+M-14-6*m);var S2=l*K0*(o0+e-6),l2=-K0*h*(B+m0);(A<.052359877||A>H0-.052359877)&&(l2=0),b0=A2+S2,x0=n2,x!==0&&(b0-=o/x*l2,x0+=l2/x);var z2=0,x2=(L+b*m2)%h0;if(z+=V*f,A+=D*f,H+=b0*f,q0+=x0*f,W+=z0*f,v0!==0){if(U0=Math.pow(P/N0,f2),v0===2){T0=o*o;var U2=z;z=u0;var T2=m;m=l0,r0=z*m,L0=-.306-(z-.64)*.44,z<=.65?(Z0=3.616-13.247*z+16.29*m,P0=-19.302+117.39*z-228.419*m+156.591*r0,V0=-18.9068+109.7927*z-214.6334*m+146.5816*r0,W0=-41.122+242.694*z-471.094*m+313.953*r0,Y=-146.407+841.88*z-1629.014*m+1083.435*r0,a2=-532.114+3017.977*z-5740.032*m+3708.276*r0):(Z0=-72.099+331.819*z-508.738*m+266.724*r0,P0=-346.844+1582.851*z-2415.925*m+1246.113*r0,V0=-342.585+1554.908*z-2366.899*m+1215.972*r0,W0=-1052.797+4758.686*z-7193.992*m+3651.957*r0,Y=-3581.69+16178.11*z-24462.77*m+12422.52*r0,z>.715?a2=-5149.66+29936.92*z-54087.36*m+31324.56*r0:a2=1464.74-4664.75*z+3763.64*m),z<.7?(G0=-919.2277+4988.61*z-9064.77*m+5542.21*r0,d2=-822.71072+4568.6173*z-8491.4146*m+5337.524*r0,r2=-853.666+4690.25*z-8624.77*m+5341.4*r0):(G0=-37995.78+161616.52*z-229838.2*m+109377.94*r0,d2=-51752.104+218913.95*z-309468.16*m+146349.42*r0,r2=-40023.88+170470.89*z-242699.48*m+115605.82*r0),B0=x*x,F0=.75*(1+2*o+T0),n0=1.5*B0,$0=1.875*x*(1-2*o-3*T0),E0=-1.875*x*(1+2*o-3*T0),_0=35*B0*F0,C0=39.375*B0*B0,O0=9.84375*x*(B0*(1-2*o-5*T0)+.33333333*(-2+4*o+6*T0)),X0=x*(4.92187512*B0*(-2-4*o+10*T0)+6.56250012*(1+2*o-3*T0)),k0=29.53125*x*(2-8*o+T0*(-12+8*o+10*T0)),w0=29.53125*x*(-2-8*o+T0*(12+8*o-10*T0)),o2=P*P,v2=U0*U0,D0=3*o2*v2,y0=D0*M2,q=y0*F0*L0,F=y0*n0*Z0,D0*=U0,y0=D0*s2,K=y0*$0*P0,U=y0*E0*V0,D0*=U0,y0=2*D0*t2,S=y0*_0*W0,I=y0*C0*Y,D0*=U0,y0=D0*y2,w=y0*O0*a2,t=y0*X0*r2,y0=2*D0*h2,N=y0*k0*d2,J=y0*w0*G0,g0=(T+u+u-(x2+x2))%h0,p0=R+z0+2*(i0+x0-m2)-X,z=U2,m=T2}v0===1&&(I0=1+m*(-2.5+.8125*m),P0=1+2*m,r=1+m*(-6+6.60937*m),F0=.75*(1+o)*(1+o),M0=.9375*x*x*(1+3*o)-.75*(1+o),t0=1+o,t0*=1.875*t0*t0,s0=3*P*P*U0*U0,A0=2*s0*F0*I0*J0,S0=3*s0*t0*r*e2*U0,s0=s0*M0*P0*p2*U0,g0=(T+u+v-x2)%h0,p0=R+_+z0+b0+x0-(X+m2)),e0=g0,j0=X,f0=0,P=X+z2}return{em:z,argpm:H,inclm:A,mm:W,nm:P,nodem:q0,irez:v0,atime:f0,d2201:q,d2211:F,d3210:K,d3222:U,d4410:S,d4422:I,d5220:w,d5232:t,d5421:N,d5433:J,dedt:V,didt:D,dmdt:z0,dndt:z2,dnodt:x0,domdt:b0,del1:s0,del2:A0,del3:S0,xfact:p0,xlamo:g0,xli:e0,xni:j0}}function L2(a){var o=(a-2451545)/36525,v=-62e-7*o*o*o+.093104*o*o+(876600*3600+8640184812866e-6)*o+67310.54841;return v=v*i2/240%h0,v<0&&(v+=h0),v}function Z2(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?L2(X2.apply(void 0,arguments)):L2.apply(void 0,arguments)}function l1(a){var o=a.ecco,v=a.epoch,d=a.inclo,h=a.opsmode,n=a.no,l=o*o,i=1-l,x=Math.sqrt(i),s=Math.cos(d),p=s*s,y=Math.pow(N0/n,f2),$=.75*c0*(3*p-1)/(x*i),g=$/(y*y),O=y*(1-g*g-g*(1/3+134*g*g/81));g=$/(O*O),n/=1+g;var Q=Math.pow(N0/n,f2),C=Math.sin(d),E=Q*i,c=1-5*p,k=-c-p-p,Z=1/Q,j=E*E,f=Q*(1-o),b="n",L;if(h==="a"){var T=v-7305,R=Math.floor(T+1e-8),X=T-R,u=.017202791694070362,i0=1.7321343856509375,_=5075514194322695e-30,a0=u+h0;L=(i0+u*R+a0*X+T*T*_)%h0,L<0&&(L+=h0)}else L=Z2(v+24332815e-1);return{no:n,method:b,ainv:Z,ao:Q,con41:k,con42:c,cosio:s,cosio2:p,eccsq:l,omeosq:i,posq:j,rp:f,rteosq:x,sinio:C,gsto:L}}function x1(a){var o=a.irez,v=a.d2201,d=a.d2211,h=a.d3210,n=a.d3222,l=a.d4410,i=a.d4422,x=a.d5220,s=a.d5232,p=a.d5421,y=a.d5433,$=a.dedt,g=a.del1,O=a.del2,Q=a.del3,C=a.didt,E=a.dmdt,c=a.dnodt,k=a.domdt,Z=a.argpo,j=a.argpdot,f=a.t,b=a.tc,L=a.gsto,T=a.xfact,R=a.xlamo,X=a.no,u=a.atime,i0=a.em,_=a.argpm,a0=a.inclm,M=a.xli,d0=a.mm,G=a.xni,B=a.nodem,m0=a.nm,o0=.13130908,e=2.8843198,u0=.37448087,l0=5.7686396,m=.95240898,z=1.8014998,H=1.050833,A=4.4108898,W=.0043752690880113,P=720,q0=-720,v0=259200,f0,q,F,K,U,S,I,w,t=0,N=0,J=(L+b*W)%h0;if(i0+=$*f,a0+=C*f,_+=k*f,B+=c*f,d0+=E*f,o!==0){(u===0||f*u<=0||Math.abs(f)<Math.abs(u))&&(u=0,G=X,M=R),f>0?f0=P:f0=q0;for(var V=381;V===381;)o!==2?(I=g*Math.sin(M-o0)+O*Math.sin(2*(M-e))+Q*Math.sin(3*(M-u0)),U=G+T,S=g*Math.cos(M-o0)+2*O*Math.cos(2*(M-e))+3*Q*Math.cos(3*(M-u0)),S*=U):(w=Z+j*u,F=w+w,q=M+M,I=v*Math.sin(F+M-l0)+d*Math.sin(M-l0)+h*Math.sin(w+M-m)+n*Math.sin(-w+M-m)+l*Math.sin(F+q-z)+i*Math.sin(q-z)+x*Math.sin(w+M-H)+s*Math.sin(-w+M-H)+p*Math.sin(w+q-A)+y*Math.sin(-w+q-A),U=G+T,S=v*Math.cos(F+M-l0)+d*Math.cos(M-l0)+h*Math.cos(w+M-m)+n*Math.cos(-w+M-m)+x*Math.cos(w+M-H)+s*Math.cos(-w+M-H)+2*(l*Math.cos(F+q-z)+i*Math.cos(q-z)+p*Math.cos(w+q-A)+y*Math.cos(-w+q-A)),S*=U),Math.abs(f-u)>=P?V=381:(N=f-u,V=0),V===381&&(M+=U*f0+I*v0,G+=I*f0+S*v0,u+=f0);m0=G+I*N+S*N*N*.5,K=M+U*N+I*N*N*.5,o!==1?(d0=K-2*B+2*J,t=m0-X):(d0=K-B-_+J,t=m0-X),m0=X+t}return{atime:u,em:i0,argpm:_,inclm:a0,xli:M,mm:d0,xni:G,nodem:B,dndt:t,nm:m0}}function B2(a,o){var v,d,h,n,l,i,x,s,p,y,$,g,O,Q,C,E,c,k,Z,j,f,b,L,T,R,X,u,i0=15e-13;a.t=o,a.error=0;var _=a.mo+a.mdot*a.t,a0=a.argpo+a.argpdot*a.t,M=a.nodeo+a.nodedot*a.t;p=a0,f=_;var d0=a.t*a.t;if(L=M+a.nodecf*d0,c=1-a.cc1*a.t,k=a.bstar*a.cc4*a.t,Z=a.t2cof*d0,a.isimp!==1){x=a.omgcof*a.t;var G=1+a.eta*Math.cos(_);i=a.xmcof*(G*G*G-a.delmo),E=x+i,f=_+E,p=a0-E,g=d0*a.t,O=g*a.t,c=c-a.d2*d0-a.d3*g-a.d4*O,k+=a.bstar*a.cc5*(Math.sin(f)-a.sinmao),Z=Z+a.t3cof*g+O*(a.t4cof+a.t*a.t5cof)}b=a.no;var B=a.ecco;if(j=a.inclo,a.method==="d"){Q=a.t;var m0={irez:a.irez,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,del1:a.del1,del2:a.del2,del3:a.del3,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,argpo:a.argpo,argpdot:a.argpdot,t:a.t,tc:Q,gsto:a.gsto,xfact:a.xfact,xlamo:a.xlamo,no:a.no,atime:a.atime,em:B,argpm:p,inclm:j,xli:a.xli,mm:f,xni:a.xni,nodem:L,nm:b},o0=x1(m0);B=o0.em,p=o0.argpm,j=o0.inclm,f=o0.mm,L=o0.nodem,b=o0.nm}if(b<=0)return a.error=2,[!1,!1];var e=Math.pow(N0/b,f2)*c*c;if(b=N0/Math.pow(e,1.5),B-=k,B>=1||B<-.001)return a.error=1,[!1,!1];B<1e-6&&(B=1e-6),f+=a.no*Z,R=f+p+L,L%=h0,p%=h0,R%=h0,f=(R-p-L)%h0;var u0=Math.sin(j),l0=Math.cos(j),m=B;if(T=j,y=p,u=L,X=f,n=u0,h=l0,a.method==="d"){var z={inclo:a.inclo,init:"n",ep:m,inclp:T,nodep:u,argpp:y,mp:X,opsmode:a.operationmode},H=O2(a,z);if(m=H.ep,u=H.nodep,y=H.argpp,X=H.mp,T=H.inclp,T<0&&(T=-T,u+=H0,y-=H0),m<0||m>1)return a.error=3,[!1,!1]}a.method==="d"&&(n=Math.sin(T),h=Math.cos(T),a.aycof=-.5*R0*n,Math.abs(h+1)>15e-13?a.xlcof=-.25*R0*n*(3+5*h)/(1+h):a.xlcof=-.25*R0*n*(3+5*h)/i0);var A=m*Math.cos(y);E=1/(e*(1-m*m));var W=m*Math.sin(y)+E*a.aycof,P=X+y+u+E*a.xlcof*A,q0=(P-u)%h0;s=q0,C=9999.9;for(var v0=1;Math.abs(C)>=1e-12&&v0<=10;)d=Math.sin(s),v=Math.cos(s),C=1-v*A-d*W,C=(q0-W*v+A*d-s)/C,Math.abs(C)>=.95&&(C>0?C=.95:C=-.95),s+=C,v0+=1;var f0=A*v+W*d,q=A*d-W*v,F=A*A+W*W,K=e*(1-F);if(K<0)return a.error=4,[!1,!1];var U=e*(1-f0),S=Math.sqrt(e)*q/U,I=Math.sqrt(K)/U,w=Math.sqrt(1-F);E=q/(1+w);var t=e/U*(d-W-A*E),N=e/U*(v-A+W*E);$=Math.atan2(t,N);var J=(N+N)*t,V=1-2*t*t;E=1/K;var D=.5*c0*E,z0=D*E;a.method==="d"&&(l=h*h,a.con41=3*l-1,a.x1mth2=1-l,a.x7thm1=7*l-1);var x0=U*(1-1.5*z0*w*a.con41)+.5*D*a.x1mth2*V;if(x0<1)return a.error=6,{position:!1,velocity:!1};$-=.25*z0*a.x7thm1*J;var b0=u+1.5*z0*h*J,s0=T+1.5*z0*h*n*V,A0=S-b*D*a.x1mth2*J/N0,S0=I+b*D*(a.x1mth2*V+1.5*a.con41)/N0,p0=Math.sin($),g0=Math.cos($),e0=Math.sin(b0),j0=Math.cos(b0),F0=Math.sin(s0),n0=Math.cos(s0),M0=-e0*n0,$0=j0*n0,E0=M0*p0+j0*g0,t0=$0*p0+e0*g0,_0=F0*p0,C0=M0*g0-j0*p0,O0=$0*g0-e0*p0,X0=F0*g0,k0={x:x0*E0*Y0,y:x0*t0*Y0,z:x0*_0*Y0},w0={x:(A0*E0+S0*C0)*I2,y:(A0*t0+S0*O0)*I2,z:(A0*_0+S0*X0)*I2};return{position:k0,velocity:w0}}function g1(a,o){var v=o.opsmode,d=o.satn,h=o.epoch,n=o.xbstar,l=o.xecco,i=o.xargpo,x=o.xinclo,s=o.xmo,p=o.xno,y=o.xnodeo,$,g,O,Q,C,E,c,k,Z,j,f,b,L,T,R,X,u,i0,_,a0,M,d0,G,B,m0,o0,e,u0,l0,m,z,H,A,W,P,q0,v0,f0,q,F,K,U,S,I,w,t,N,J,V,D,z0,x0,b0,s0,A0,S0,p0=15e-13;a.isimp=0,a.method="n",a.aycof=0,a.con41=0,a.cc1=0,a.cc4=0,a.cc5=0,a.d2=0,a.d3=0,a.d4=0,a.delmo=0,a.eta=0,a.argpdot=0,a.omgcof=0,a.sinmao=0,a.t=0,a.t2cof=0,a.t3cof=0,a.t4cof=0,a.t5cof=0,a.x1mth2=0,a.x7thm1=0,a.mdot=0,a.nodedot=0,a.xlcof=0,a.xmcof=0,a.nodecf=0,a.irez=0,a.d2201=0,a.d2211=0,a.d3210=0,a.d3222=0,a.d4410=0,a.d4422=0,a.d5220=0,a.d5232=0,a.d5421=0,a.d5433=0,a.dedt=0,a.del1=0,a.del2=0,a.del3=0,a.didt=0,a.dmdt=0,a.dnodt=0,a.domdt=0,a.e3=0,a.ee2=0,a.peo=0,a.pgho=0,a.pho=0,a.pinco=0,a.plo=0,a.se2=0,a.se3=0,a.sgh2=0,a.sgh3=0,a.sgh4=0,a.sh2=0,a.sh3=0,a.si2=0,a.si3=0,a.sl2=0,a.sl3=0,a.sl4=0,a.gsto=0,a.xfact=0,a.xgh2=0,a.xgh3=0,a.xgh4=0,a.xh2=0,a.xh3=0,a.xi2=0,a.xi3=0,a.xl2=0,a.xl3=0,a.xl4=0,a.xlamo=0,a.zmol=0,a.zmos=0,a.atime=0,a.xli=0,a.xni=0,a.bstar=n,a.ecco=l,a.argpo=i,a.inclo=x,a.mo=s,a.no=p,a.nodeo=y,a.operationmode=v;var g0=78/Y0+1,e0=42/Y0,j0=e0*e0*e0*e0;a.init="y",a.t=0;var F0={satn:d,ecco:a.ecco,epoch:h,inclo:a.inclo,no:a.no,method:a.method,opsmode:a.operationmode},n0=l1(F0),M0=n0.ao,$0=n0.con42,E0=n0.cosio,t0=n0.cosio2,_0=n0.eccsq,C0=n0.omeosq,O0=n0.posq,X0=n0.rp,k0=n0.rteosq,w0=n0.sinio;if(a.no=n0.no,a.con41=n0.con41,a.gsto=n0.gsto,a.a=Math.pow(a.no*n1,-2/3),a.alta=a.a*(1+a.ecco)-1,a.altp=a.a*(1-a.ecco)-1,a.error=0,C0>=0||a.no>=0){if(a.isimp=0,X0<220/Y0+1&&(a.isimp=1),e=g0,M=j0,i0=(X0-1)*Y0,i0<156){e=i0-78,i0<98&&(e=20);var I0=(120-e)/Y0;M=I0*I0*I0*I0,e=e/Y0+1}_=1/O0,t=1/(M0-e),a.eta=M0*a.ecco*t,b=a.eta*a.eta,f=a.ecco*a.eta,a0=Math.abs(1-b),E=M*Math.pow(t,4),c=E/Math.pow(a0,3.5),Q=c*a.no*(M0*(1+1.5*b+f*(4+b))+.375*c0*t/a0*a.con41*(8+3*b*(8+b))),a.cc1=a.bstar*Q,C=0,a.ecco>1e-4&&(C=-2*E*t*R0*a.no*w0/a.ecco),a.x1mth2=1-t0,a.cc4=2*a.no*c*M0*C0*(a.eta*(2+.5*b)+a.ecco*(.5+2*b)-c0*t/(M0*a0)*(-3*a.con41*(1-2*f+b*(1.5-.5*f))+.75*a.x1mth2*(2*b-f*(1+b))*Math.cos(2*a.argpo))),a.cc5=2*c*M0*C0*(1+2.75*(b+f)+f*b),k=t0*t0,S=1.5*c0*_*a.no,I=.5*S*c0*_,w=-.46875*d1*_*_*a.no,a.mdot=a.no+.5*S*k0*a.con41+.0625*I*k0*(13-78*t0+137*k),a.argpdot=-.5*S*$0+.0625*I*(7-114*t0+395*k)+w*(3-36*t0+49*k),J=-S*E0,a.nodedot=J+(.5*I*(4-19*t0)+2*w*(3-7*t0))*E0,N=a.argpdot+a.nodedot,a.omgcof=a.bstar*C*Math.cos(a.argpo),a.xmcof=0,a.ecco>1e-4&&(a.xmcof=-f2*E*a.bstar/f),a.nodecf=3.5*C0*J*a.cc1,a.t2cof=1.5*a.cc1,Math.abs(E0+1)>15e-13?a.xlcof=-.25*R0*w0*(3+5*E0)/(1+E0):a.xlcof=-.25*R0*w0*(3+5*E0)/p0,a.aycof=-.5*R0*w0;var L0=1+a.eta*Math.cos(a.mo);if(a.delmo=L0*L0*L0,a.sinmao=Math.sin(a.mo),a.x7thm1=7*t0-1,2*H0/a.no>=225){a.method="d",a.isimp=1,K=0,R=a.inclo;var Z0={epoch:h,ep:a.ecco,argpp:a.argpo,tc:K,inclp:a.inclo,nodep:a.nodeo,np:a.no,e3:a.e3,ee2:a.ee2,peo:a.peo,pgho:a.pgho,pho:a.pho,pinco:a.pinco,plo:a.plo,se2:a.se2,se3:a.se3,sgh2:a.sgh2,sgh3:a.sgh3,sgh4:a.sgh4,sh2:a.sh2,sh3:a.sh3,si2:a.si2,si3:a.si3,sl2:a.sl2,sl3:a.sl3,sl4:a.sl4,xgh2:a.xgh2,xgh3:a.xgh3,xgh4:a.xgh4,xh2:a.xh2,xh3:a.xh3,xi2:a.xi2,xi3:a.xi3,xl2:a.xl2,xl3:a.xl3,xl4:a.xl4,zmol:a.zmol,zmos:a.zmos},r=h1(Z0);a.e3=r.e3,a.ee2=r.ee2,a.peo=r.peo,a.pgho=r.pgho,a.pho=r.pho,a.pinco=r.pinco,a.plo=r.plo,a.se2=r.se2,a.se3=r.se3,a.sgh2=r.sgh2,a.sgh3=r.sgh3,a.sgh4=r.sgh4,a.sh2=r.sh2,a.sh3=r.sh3,a.si2=r.si2,a.si3=r.si3,a.sl2=r.sl2,a.sl3=r.sl3,a.sl4=r.sl4,g=r.sinim,$=r.cosim,Z=r.em,j=r.emsq,d0=r.s1,G=r.s2,B=r.s3,m0=r.s4,o0=r.s5,u0=r.ss1,l0=r.ss2,m=r.ss3,z=r.ss4,H=r.ss5,A=r.sz1,W=r.sz3,P=r.sz11,q0=r.sz13,v0=r.sz21,f0=r.sz23,q=r.sz31,F=r.sz33,a.xgh2=r.xgh2,a.xgh3=r.xgh3,a.xgh4=r.xgh4,a.xh2=r.xh2,a.xh3=r.xh3,a.xi2=r.xi2,a.xi3=r.xi3,a.xl2=r.xl2,a.xl3=r.xl3,a.xl4=r.xl4,a.zmol=r.zmol,a.zmos=r.zmos,u=r.nm,V=r.z1,D=r.z3,z0=r.z11,x0=r.z13,b0=r.z21,s0=r.z23,A0=r.z31,S0=r.z33;var P0={inclo:R,init:a.init,ep:a.ecco,inclp:a.inclo,nodep:a.nodeo,argpp:a.argpo,mp:a.mo,opsmode:a.operationmode},V0=O2(a,P0);a.ecco=V0.ep,a.inclo=V0.inclp,a.nodeo=V0.nodep,a.argpo=V0.argpp,a.mo=V0.mp,L=0,T=0,X=0;var W0={cosim:$,emsq:j,argpo:a.argpo,s1:d0,s2:G,s3:B,s4:m0,s5:o0,sinim:g,ss1:u0,ss2:l0,ss3:m,ss4:z,ss5:H,sz1:A,sz3:W,sz11:P,sz13:q0,sz21:v0,sz23:f0,sz31:q,sz33:F,t:a.t,tc:K,gsto:a.gsto,mo:a.mo,mdot:a.mdot,no:a.no,nodeo:a.nodeo,nodedot:a.nodedot,xpidot:N,z1:V,z3:D,z11:z0,z13:x0,z21:b0,z23:s0,z31:A0,z33:S0,ecco:a.ecco,eccsq:_0,em:Z,argpm:L,inclm:R,mm:X,nm:u,nodem:T,irez:a.irez,atime:a.atime,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,del1:a.del1,del2:a.del2,del3:a.del3,xfact:a.xfact,xlamo:a.xlamo,xli:a.xli,xni:a.xni},Y=m1(W0);a.irez=Y.irez,a.atime=Y.atime,a.d2201=Y.d2201,a.d2211=Y.d2211,a.d3210=Y.d3210,a.d3222=Y.d3222,a.d4410=Y.d4410,a.d4422=Y.d4422,a.d5220=Y.d5220,a.d5232=Y.d5232,a.d5421=Y.d5421,a.d5433=Y.d5433,a.dedt=Y.dedt,a.didt=Y.didt,a.dmdt=Y.dmdt,a.dnodt=Y.dnodt,a.domdt=Y.domdt,a.del1=Y.del1,a.del2=Y.del2,a.del3=Y.del3,a.xfact=Y.xfact,a.xlamo=Y.xlamo,a.xli=Y.xli,a.xni=Y.xni}a.isimp!==1&&(O=a.cc1*a.cc1,a.d2=4*M0*t*O,U=a.d2*t*a.cc1/3,a.d3=(17*M0+e)*U,a.d4=.5*U*M0*t*(221*M0+31*e)*a.cc1,a.t3cof=a.d2+2*O,a.t4cof=.25*(3*a.d3+a.cc1*(12*a.d2+10*O)),a.t5cof=.2*(3*a.d4+12*a.cc1*a.d3+6*a.d2*a.d2+15*O*(2*a.d2+O)))}B2(a,0),a.init="n"}function f1(a,o){var v="i",d=1440/(2*H0),h=0,n={};n.error=0,n.satnum=a.substring(2,7),n.epochyr=parseInt(a.substring(18,20),10),n.epochdays=parseFloat(a.substring(20,32)),n.ndot=parseFloat(a.substring(33,43)),n.nddot=parseFloat(".".concat(parseInt(a.substring(44,50),10),"E").concat(a.substring(50,52))),n.bstar=parseFloat("".concat(a.substring(53,54),".").concat(parseInt(a.substring(54,59),10),"E").concat(a.substring(59,61))),n.inclo=parseFloat(o.substring(8,16)),n.nodeo=parseFloat(o.substring(17,25)),n.ecco=parseFloat(".".concat(o.substring(26,33))),n.argpo=parseFloat(o.substring(34,42)),n.mo=parseFloat(o.substring(43,51)),n.no=parseFloat(o.substring(52,63)),n.no/=d,n.inclo*=i2,n.nodeo*=i2,n.argpo*=i2,n.mo*=i2,n.epochyr<57?h=n.epochyr+2e3:h=n.epochyr+1900;var l=r1(h,n.epochdays),i=l.mon,x=l.day,s=l.hr,p=l.minute,y=l.sec;return n.jdsatepoch=X2(h,i,x,s,p,y),g1(n,{opsmode:v,satn:n.satnum,epoch:n.jdsatepoch-24332815e-1,xbstar:n.bstar,xecco:n.ecco,xargpo:n.argpo,xinclo:n.inclo,xmo:n.mo,xno:n.no,xnodeo:n.nodeo}),n}function z1(a){return p1(a)||e1(a)||M1(a)||t1()}function p1(a){if(Array.isArray(a))return C2(a)}function e1(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function M1(a,o){if(a){if(typeof a=="string")return C2(a,o);var v=Object.prototype.toString.call(a).slice(8,-1);if(v==="Object"&&a.constructor&&(v=a.constructor.name),v==="Map"||v==="Set")return Array.from(a);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return C2(a,o)}}function C2(a,o){(o==null||o>a.length)&&(o=a.length);for(var v=0,d=new Array(o);v<o;v++)d[v]=a[v];return d}function t1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s1(){for(var a=arguments.length,o=new Array(a),v=0;v<a;v++)o[v]=arguments[v];var d=o[0],h=Array.prototype.slice.call(o,1),n=X2.apply(void 0,z1(h)),l=(n-d.jdsatepoch)*o1;return B2(d,l)}function P2(a){return a*i2}function y1(a){var o=a.longitude,v=a.latitude,d=a.height,h=6378.137,n=6356.7523142,l=(h-n)/h,i=2*l-l*l,x=h/Math.sqrt(1-i*(Math.sin(v)*Math.sin(v))),s=(x+d)*Math.cos(v)*Math.cos(o),p=(x+d)*Math.cos(v)*Math.sin(o),y=(x*(1-i)+d)*Math.sin(v);return{x:s,y:p,z:y}}function u1(a,o){var v=a.x*Math.cos(o)+a.y*Math.sin(o),d=a.x*-Math.sin(o)+a.y*Math.cos(o),h=a.z;return{x:v,y:d,z:h}}function b1(a,o){var v=a.longitude,d=a.latitude,h=y1(a),n=o.x-h.x,l=o.y-h.y,i=o.z-h.z,x=Math.sin(d)*Math.cos(v)*n+Math.sin(d)*Math.sin(v)*l-Math.cos(d)*i,s=-Math.sin(v)*n+Math.cos(v)*l,p=Math.cos(d)*Math.cos(v)*n+Math.cos(d)*Math.sin(v)*l+Math.sin(d)*i;return{topS:x,topE:s,topZ:p}}function q1(a){var o=a.topS,v=a.topE,d=a.topZ,h=Math.sqrt(o*o+v*v+d*d),n=Math.asin(d/h),l=Math.atan2(-v,o)+H0;return{azimuth:l,elevation:n,rangeSat:h}}function w1(a,o){var v=b1(a,o);return q1(v)}class A1{constructor(o){F2(this,"charMap",new Map);F2(this,"kerningsMap",new Map);o.chars.forEach(v=>{this.charMap.set(v.char,v)}),o.kernings.forEach(v=>{this.kerningsMap.set(`${v.first},${v.second}`,v.amount)})}textToGeometry(o){return o.split("").map(v=>this.charMap.get(v)??this.charMap.get("?")).reduce((v,d,h,n)=>{let l=0;if(h!==0){const i=n[h-1];l=this.kerningsMap.get(`${i.id},${d.id}`)??0}return v.chars.push({iXY:[v.width+d.xoffset+l,d.yoffset],iUV:[d.x,d.y],iSize:[d.width,d.height]}),v.width+=d.xadvance+l,v},{width:0,chars:[]})}}function S1(a,o){const v=Math.cos(a)*Math.cos(o),d=-Math.cos(a)*Math.sin(o),h=Math.sin(a);return[d,h,v]}function g2(a){const o=a.reduce((h,n)=>h+n.length,0),v=a[0]instanceof Float32Array?new Float32Array(o):new Int32Array(o);let d=0;for(const h of a)v.set(h,d),d+=h.length;return v}function U1(a,o){const v=a.length*o,d=new Float32Array(v);for(let h=0;h<o;h++)d.set(a,h*a.length);return d}function D2(a,...o){postMessage(a,...o)}let $2=[];const E2=new Map,j2=new Map,V2=new Map,Y2=new Map;self.onmessage=a=>{if(a.data.type==="init"){const o=a.data.ids;if(o.length!==a.data["3LEs"].length)throw new Error("Ids must match 3LEs in length");j2.clear(),V2.clear(),Y2.clear(),E2.clear();const v=new A1(a.data.msdfDefinition);$2=a.data["3LEs"].map((d,h)=>{const n=f1(d[1],d[2]),l=v.textToGeometry(d[0].slice(2));return j2.set(n.satnum,l),V2.set(n.satnum,new Float32Array(l.chars.flatMap(i=>[i.iXY[0],i.iXY[1],i.iXY[0]+i.iSize[0],i.iXY[1],i.iXY[0]+i.iSize[0],i.iXY[1]+i.iSize[1],i.iXY[0],i.iXY[1],i.iXY[0],i.iXY[1]+i.iSize[1],i.iXY[0]+i.iSize[0],i.iXY[1]+i.iSize[1]]))),Y2.set(n.satnum,new Float32Array(l.chars.flatMap(i=>[i.iUV[0],i.iUV[1],i.iUV[0]+i.iSize[0],i.iUV[1],i.iUV[0]+i.iSize[0],i.iUV[1]+i.iSize[1],i.iUV[0],i.iUV[1],i.iUV[0],i.iUV[1]+i.iSize[1],i.iUV[0]+i.iSize[0],i.iUV[1]+i.iSize[1]]))),E2.set(n.satnum,o[h]),n}).filter(d=>d.error===0),D2({type:"init",message:"ok",queryId:a.data.queryId})}else if(a.data.type==="process"){const{date:o,location:v,queryId:d}=a.data,h=Z2(o),n={longitude:P2(v.longitude),latitude:P2(v.latitude),height:v.altitude/1e3},l=$2.map(g=>{const O=s1(g,o);if(typeof O.position!="object")return{cartesian:null,norad:g.satnum};const Q=u1(O.position,h),C=w1(n,Q);return{norad:g.satnum,cartesian:S1(C.elevation,C.azimuth)}}),i=l.filter(g=>g.cartesian).filter(g=>g.cartesian[1]>0),x=g2(i.map(g=>new Float32Array(g.cartesian))),s=g2(i.map(g=>new Int32Array([E2.get(g.norad)]))),p=g2(i.map(g=>U1(new Float32Array(g.cartesian),6*j2.get(g.norad).chars.length))),y=g2(i.map(g=>V2.get(g.norad))),$=g2(i.map(g=>Y2.get(g.norad)));D2({type:"process",result:{failedNorads:l.filter(g=>!g.cartesian).map(g=>g.norad),propagatedPositions:x,propagatedIds:s,textsOrigins:p,textsPositions:y,textsUVCoords:$},queryId:d},[x.buffer,p.buffer,y.buffer,$.buffer])}};
